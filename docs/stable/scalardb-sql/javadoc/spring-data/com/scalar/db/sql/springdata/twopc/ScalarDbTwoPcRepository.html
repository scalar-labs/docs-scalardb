<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ScalarDbTwoPcRepository (Spring Data JDBC for ScalarDB)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ScalarDbTwoPcRepository (Spring Data JDBC for ScalarDB)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":18,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/scalar/db/sql/springdata/twopc/RemotePrepareCommitPhaseOperations.Operation.html" title="interface in com.scalar.db.sql.springdata.twopc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../com/scalar/db/sql/springdata/twopc/TwoPcResult.html" title="class in com.scalar.db.sql.springdata.twopc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html" target="_top">Frames</a></li>
<li><a href="ScalarDbTwoPcRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.scalar.db.sql.springdata.twopc</div>
<h2 title="Interface ScalarDbTwoPcRepository" class="title">Interface ScalarDbTwoPcRepository&lt;T,ID&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - a model class</dd>
</dl>
<dl>
<dt>All Superinterfaces:</dt>
<dd>org.springframework.data.repository.CrudRepository&lt;T,ID&gt;, org.springframework.data.repository.PagingAndSortingRepository&lt;T,ID&gt;, org.springframework.data.repository.Repository&lt;T,ID&gt;, <a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepository.html" title="interface in com.scalar.db.sql.springdata">ScalarDbRepository</a>&lt;T,ID&gt;</dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepositoryImpl.html" title="class in com.scalar.db.sql.springdata">ScalarDbRepositoryImpl</a></dd>
</dl>
<hr>
<br>
<pre>@NoRepositoryBean
public interface <span class="typeNameLabel">ScalarDbTwoPcRepository&lt;T,ID&gt;</span>
extends <a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepository.html" title="interface in com.scalar.db.sql.springdata">ScalarDbRepository</a>&lt;T,ID&gt;</pre>
<div class="block">Spring Data fragment repository interface for two phase commit transaction in ScalarDB. The
 default Spring Transaction manager doesn't support two phase commit, so
 <code>@Transaction(transactionManager = "scalarDbSuspendableTransactionManager")</code> is also needed
 for the primitive APIs.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#begin--">begin</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#commit--">commit</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>default &lt;R&gt;&nbsp;<a href="../../../../../../com/scalar/db/sql/springdata/twopc/TwoPcResult.html" title="class in com.scalar.db.sql.springdata.twopc">TwoPcResult</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#executeTwoPcTransaction-com.scalar.db.sql.springdata.twopc.ExecutionPhaseOperations-java.util.Collection-">executeTwoPcTransaction</a></span>(<a href="../../../../../../com/scalar/db/sql/springdata/twopc/ExecutionPhaseOperations.html" title="interface in com.scalar.db.sql.springdata.twopc">ExecutionPhaseOperations</a>&lt;R&gt;&nbsp;executionPhaseOps,
                       java.util.Collection&lt;<a href="../../../../../../com/scalar/db/sql/springdata/twopc/RemotePrepareCommitPhaseOperations.html" title="class in com.scalar.db.sql.springdata.twopc">RemotePrepareCommitPhaseOperations</a>&gt;&nbsp;remotePrepareCommitPhaseOps)</code>
<div class="block">Execute a 2PC transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#join-java.lang.String-">join</a></span>(java.lang.String&nbsp;transactionId)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#prepare--">prepare</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#resume-java.lang.String-">resume</a></span>(java.lang.String&nbsp;transactionId)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#rollback--">rollback</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#suspend--">suspend</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html#validate--">validate</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.scalar.db.sql.springdata.ScalarDbRepository">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.scalar.db.sql.springdata.<a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepository.html" title="interface in com.scalar.db.sql.springdata">ScalarDbRepository</a></h3>
<code><a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepository.html#insert-T-">insert</a>, <a href="../../../../../../com/scalar/db/sql/springdata/ScalarDbRepository.html#update-T-">update</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.springframework.data.repository.PagingAndSortingRepository">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.springframework.data.repository.PagingAndSortingRepository</h3>
<code>findAll, findAll</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.springframework.data.repository.CrudRepository">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.springframework.data.repository.CrudRepository</h3>
<code>count, delete, deleteAll, deleteAll, deleteAllById, deleteById, existsById, findAll, findAllById, findById, save, saveAll</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="begin--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>begin</h4>
<pre>java.lang.String&nbsp;begin()</pre>
</li>
</ul>
<a name="prepare--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre>void&nbsp;prepare()</pre>
</li>
</ul>
<a name="validate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre>void&nbsp;validate()</pre>
</li>
</ul>
<a name="suspend--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspend</h4>
<pre>void&nbsp;suspend()</pre>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>void&nbsp;commit()</pre>
</li>
</ul>
<a name="rollback--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>void&nbsp;rollback()</pre>
</li>
</ul>
<a name="join-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>join</h4>
<pre>void&nbsp;join(java.lang.String&nbsp;transactionId)</pre>
</li>
</ul>
<a name="resume-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resume</h4>
<pre>void&nbsp;resume(java.lang.String&nbsp;transactionId)</pre>
</li>
</ul>
<a name="executeTwoPcTransaction-com.scalar.db.sql.springdata.twopc.ExecutionPhaseOperations-java.util.Collection-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>executeTwoPcTransaction</h4>
<pre>@Transactional(transactionManager="scalarDbSuspendableTransactionManager")
default&nbsp;&lt;R&gt;&nbsp;<a href="../../../../../../com/scalar/db/sql/springdata/twopc/TwoPcResult.html" title="class in com.scalar.db.sql.springdata.twopc">TwoPcResult</a>&lt;R&gt;&nbsp;executeTwoPcTransaction(<a href="../../../../../../com/scalar/db/sql/springdata/twopc/ExecutionPhaseOperations.html" title="interface in com.scalar.db.sql.springdata.twopc">ExecutionPhaseOperations</a>&lt;R&gt;&nbsp;executionPhaseOps,
                                                                                                                              java.util.Collection&lt;<a href="../../../../../../com/scalar/db/sql/springdata/twopc/RemotePrepareCommitPhaseOperations.html" title="class in com.scalar.db.sql.springdata.twopc">RemotePrepareCommitPhaseOperations</a>&gt;&nbsp;remotePrepareCommitPhaseOps)</pre>
<div class="block">Execute a 2PC transaction. See <code>executeTwoPcTransaction</code> above. This method starts a 2PC
 transaction with an auto generated transaction ID.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>R</code> - a result type returned from <code>executionPhaseOps</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executionPhaseOps</code> - execution phase task containing both local and remote operations
     (local CRUD, remote service call and so on.) This task is also supposed to start
     transactions with a given transaction ID on remote participants. Local and remote
     operations will be rolled back if any exception is thrown</dd>
<dd><code>remotePrepareCommitPhaseOps</code> - a collection of remote 2PC operations (prepare, validate,
     commit and rollback) for all the remote participants</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a return value from <code>executionPhaseOps</code> that can contain any result of local
     operation and/or remote operations</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/scalar/db/sql/springdata/exception/ScalarDbUnknownTransactionStateException.html" title="class in com.scalar.db.sql.springdata.exception">ScalarDbUnknownTransactionStateException</a></code> - if the 2PC transaction fails due to a
     non-transient cause with an unknown final status. The exception contains <code>transactionId</code>. Note that the final 2PC transaction status is unknown. Whether the
     transaction is actually committed or not needs to be decided by the application side (e.g.
     check if the target record is expectedly updated)</dd>
<dd><code><a href="../../../../../../com/scalar/db/sql/springdata/exception/ScalarDbNonTransientException.html" title="class in com.scalar.db.sql.springdata.exception">ScalarDbNonTransientException</a></code> - if the 2PC transaction fails due to a non-transient
     cause. The exception contains <code>transactionId</code></dd>
<dd><code><a href="../../../../../../com/scalar/db/sql/springdata/exception/ScalarDbTransientException.html" title="class in com.scalar.db.sql.springdata.exception">ScalarDbTransientException</a></code> - if the 2PC transaction fails due to a transient cause. The
     exception contains <code>transactionId</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/scalar/db/sql/springdata/twopc/RemotePrepareCommitPhaseOperations.Operation.html" title="interface in com.scalar.db.sql.springdata.twopc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../com/scalar/db/sql/springdata/twopc/TwoPcResult.html" title="class in com.scalar.db.sql.springdata.twopc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/scalar/db/sql/springdata/twopc/ScalarDbTwoPcRepository.html" target="_top">Frames</a></li>
<li><a href="ScalarDbTwoPcRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
